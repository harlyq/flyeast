var FlyEast;!function(){function n(n){var a=0,t=0;a=n.lat>0?Math.floor(n.lat):Math.ceil(n.lat),t=n.lon>0?Math.floor(n.lon):Math.ceil(n.lon),n.lat=a+(n.lat-a)/.6,n.lon=t+(n.lon-t)/.6}function a(){for(var a=E.length-1;a>=0;a--)n(E[a]);E.sort(function(n,a){return n.lon-a.lon})}function t(n,a){var t=a.indexOf(n);-1==t&&alert("city not in list"),a.splice(t,1)}function o(n,a){return{x:w*(a/360+.5),y:S*(.5-n/180)}}function r(n,a){var t=a-n;return-180>t?360+t:t>180?t-360:t}function l(n,a){var t=6371,o=n.lat/180*Math.PI,r=n.lon/180*Math.PI,l=a.lat/180*Math.PI,i=a.lon/180*Math.PI,c=.5*(l-o),y=.5*(i-r),e=Math.sin(y),u=Math.sin(c),k=u*u+Math.cos(o)*Math.cos(l)*e*e,s=2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k));return Math.round(t*s)}function i(n,a,t){var r=o(n.lat,n.lon),l=o(a.lat,a.lon);B.strokeStyle=t,B.lineWidth=A,B.beginPath(),B.moveTo(r.x,r.y),a.lon>n.lon?B.lineTo(l.x,l.y):(B.lineTo(l.x+w,l.y),B.moveTo(r.x-w,r.y),B.lineTo(l.x,l.y)),B.stroke()}function c(){var n=this.getAttribute("data-index"),a=C.destinationList[n];C.from!=C.home&&k(C.from,L,"#f04000"),n!=C.winDestination?(T=2,i(a,C.from,"white")):(C.distance+=l(C.from,a),C.visited++,i(C.from,a,"#f04000"),C.from=a,t(a,N),k(a,L,"white"),0==N.length?T=3:m(C.from)),u(a),e()}function y(){for(var n=document.getElementsByClassName("destination"),a=n.length-1;a>=0;a--)n[a].addEventListener("click",c);document.getElementById("win").addEventListener("click",g),document.getElementById("lose").addEventListener("click",g),document.getElementById("help").addEventListener("click",f)}function e(){var n="0.4";document.getElementById("home").innerHTML=C.home.city+" ("+C.home.country+")",document.getElementById("distance").innerHTML=C.distance.toString()+" km",document.getElementById("visited").innerHTML=C.visited.toString(),document.getElementById("from").innerHTML=C.from.city+" ("+C.from.country+")";for(var a=0;a<C.destinationList.length;a++){var t=C.destinationList[a],o="";null!=t&&(o=C.destinationList[a].city+'<br />(<span class="countryFont">'+C.destinationList[a].country+"</span>)");var r=document.getElementById("destination"+(a+1));r.innerHTML=o}var l="none",i="none",c="none",y=n,e=n;switch(T){case 0:l="block";break;case 1:y="1.0",e="1.0";break;case 3:i="block";break;case 2:c="block"}document.getElementById("destination1").style.opacity=y,document.getElementById("destination2").style.opacity=e,document.getElementById("help").style.display=l,document.getElementById("win").style.display=i,document.getElementById("lose").style.display=c}function u(n){var a=o(n.lat,n.lon),t=P.height/S,r=.5*P.width-a.x*t;I.drawImage(M,r,0,w*t,S*t),I.drawImage(M,r-w*t,0,w*t,S*t),I.drawImage(M,r+w*t,0,w*t,S*t)}function k(n,a,t){var r=o(n.lat,n.lon);B.strokeStyle="#000000",B.fillStyle=t,B.lineWidth=2,B.beginPath(),B.arc(r.x,r.y,a,0,2*Math.PI),B.stroke(),B.fill()}function s(n){return n[Math.floor(Math.random()*n.length)]}function d(n,a){for(var t=50,o=40,r=5,l=N.length-1;l>=0;l--){var i=N[l];if(i==n)i.weight=1e4;else{var c=a(i);0>c&&(c+=360),i.weight=i.rank*t+c}}var y=N.sort(function(n,a){return n.weight-a.weight}),e=y[0].weight+o*y[0].rank;return y=y.filter(function(n,a){return r>a&&n.weight<e})}function m(n){var a=10,t=d(n,function(t){return r(n.lon,t.lon-a)}),o=d(n,function(t){return-r(n.lon,t.lon+a)});if(0==t.length)return alert("need a better algorithm for pickTwoDestinations()"),void(T=2);var l=Math.random()>.5?1:0;C.destinationList[l]=s(t),C.destinationList[1-l]=s(o),C.winDestination=l}function h(){a(),y()}function g(){N.length=0;for(var n=0;n<E.length;n++)N.push(E[n]);C.home=s(N),C.from=C.home,C.visited=0,C.distance=0,t(C.from,N),m(C.home),B.drawImage(p,0,0,w,S),k(C.home,L,"yellow"),u(C.from),T=0,e()}function f(){T=1,e()}var b,v=function(){function n(){this.home=null,this.distance=0,this.visited=0,this.from=null,this.destinationList=[null,null],this.winDestination=0}return n}(),M=null,B=null,w=0,S=0,p=null,P=null,I=null,L=4,A=1;!function(n){n[n.NewGame=0]="NewGame",n[n.Normal=1]="Normal",n[n.Lose=2]="Lose",n[n.Win=3]="Win"}(b||(b={}));var T=0,C=new v,E=[{country:"Afghanistan",city:"Kabul",lat:34.28,lon:69.11,rank:1},{country:"Albania",city:"Tirane",lat:41.18,lon:19.49,rank:2},{country:"Algeria",city:"Algiers",lat:36.42,lon:3.08,rank:1},{country:"American Samoa",city:"Pago Pago",lat:-14.16,lon:-170.43,rank:3},{country:"Andorra",city:"Andorra la Vella",lat:42.31,lon:1.32,rank:3},{country:"Angola",city:"Luanda",lat:-8.5,lon:13.15,rank:3},{country:"Antigua and Barbuda",city:"Saint John's",lat:17.7,lon:-61.51,rank:3},{country:"Argentina",city:"Buenos Aires",lat:-36.3,lon:-60,rank:1},{country:"Armenia",city:"Yerevan",lat:40.1,lon:44.31,rank:3},{country:"Aruba",city:"Oranjestad",lat:12.32,lon:-70.02,rank:3},{country:"Australia",city:"Canberra",lat:-35.15,lon:149.08,rank:1},{country:"Austria",city:"Vienna",lat:48.12,lon:16.22,rank:1},{country:"Azerbaijan",city:"Baku",lat:40.29,lon:49.56,rank:3},{country:"Bahamas",city:"Nassau",lat:25.05,lon:-77.2,rank:2},{country:"Bahrain",city:"Manama",lat:26.1,lon:50.3,rank:3},{country:"Bangladesh",city:"Dhaka",lat:23.43,lon:90.26,rank:2},{country:"Barbados",city:"Bridgetown",lat:13.05,lon:-59.3,rank:3},{country:"Belarus",city:"Minsk",lat:53.52,lon:27.3,rank:2},{country:"Belgium",city:"Brussels",lat:50.51,lon:4.21,rank:1},{country:"Belize",city:"Belmopan",lat:17.18,lon:-88.3,rank:3},{country:"Benin",city:"Porto-Novo",lat:6.23,lon:2.42,rank:3},{country:"Bhutan",city:"Thimphu",lat:27.31,lon:89.45,rank:3},{country:"Bolivia",city:"La Paz",lat:-16.2,lon:-68.1,rank:3},{country:"Bosnia and Herzegovina",city:"Sarajevo",lat:43.52,lon:18.26,rank:2},{country:"Botswana",city:"Gaborone",lat:-24.45,lon:25.57,rank:3},{country:"Brazil",city:"Brasilia",lat:-15.47,lon:-47.52,rank:2},{country:"British Virgin Islands",city:"Road Town",lat:18.27,lon:-64.37,rank:3},{country:"Brunei Darussalam",city:"Bandar Seri Begawan",lat:4.52,lon:115,rank:3},{country:"Bulgaria",city:"Sofia",lat:42.45,lon:23.2,rank:1},{country:"Burkina Faso",city:"Ouagadougou",lat:12.15,lon:-1.3,rank:3},{country:"Burundi",city:"Bujumbura",lat:-3.16,lon:29.18,rank:2},{country:"Cambodia",city:"Phnom Penh",lat:11.33,lon:104.55,rank:1},{country:"Cameroon",city:"Yaounde",lat:3.5,lon:11.35,rank:2},{country:"Canada",city:"Ottawa",lat:45.27,lon:-75.42,rank:1},{country:"Cape Verde",city:"Praia",lat:15.02,lon:-23.34,rank:3},{country:"Cayman Islands",city:"George Town",lat:19.2,lon:-81.24,rank:2},{country:"Central African Republic",city:"Bangui",lat:4.23,lon:18.35,rank:3},{country:"Chad",city:"N'Djamena",lat:12.1,lon:14.59,rank:3},{country:"Chile",city:"Santiago",lat:-33.24,lon:-70.4,rank:1},{country:"China",city:"Beijing",lat:39.55,lon:116.2,rank:1},{country:"Colombia",city:"Bogota",lat:4.34,lon:-74,rank:1},{country:"Comros",city:"Moroni",lat:-11.4,lon:43.16,rank:3},{country:"Congo",city:"Brazzaville",lat:-4.09,lon:15.12,rank:2},{country:"Costa Rica",city:"San Jose",lat:9.55,lon:-84.02,rank:1},{country:"Cote d'Ivoire",city:"Yamoussoukro",lat:6.49,lon:-5.17,rank:3},{country:"Croatia",city:"Zagreb",lat:45.5,lon:15.58,rank:1},{country:"Cuba",city:"Havana",lat:23.08,lon:-82.22,rank:1},{country:"Cyprus",city:"Nicosia",lat:35.1,lon:33.25,rank:2},{country:"Czech Republic",city:"Prague",lat:50.05,lon:14.22,rank:1},{country:"Democratic People's Republic of Korea",city:"P'yongyang",lat:39.09,lon:125.3,rank:1},{country:"Democratic Republic of the Congo",city:"Kinshasa",lat:-4.2,lon:15.15,rank:2},{country:"Denmark",city:"Copenhagen",lat:55.41,lon:12.34,rank:1},{country:"Djibouti",city:"Djibouti",lat:11.08,lon:42.2,rank:3},{country:"Dominica",city:"Roseau",lat:15.2,lon:-61.24,rank:3},{country:"Dominica Republic",city:"Santo Domingo",lat:18.3,lon:-69.59,rank:2},{country:"East Timor",city:"Dili",lat:-8.29,lon:125.34,rank:2},{country:"Ecuador",city:"Quito",lat:-.15,lon:-78.35,rank:1},{country:"Egypt",city:"Cairo",lat:30.01,lon:31.14,rank:1},{country:"El Salvador",city:"San Salvador",lat:13.4,lon:-89.1,rank:1},{country:"Equatorial Guinea",city:"Malabo",lat:3.45,lon:8.5,rank:2},{country:"Eritrea",city:"Asmara",lat:15.19,lon:38.55,rank:2},{country:"Estonia",city:"Tallinn",lat:59.22,lon:24.48,rank:2},{country:"Ethiopia",city:"Addis Ababa",lat:9.02,lon:38.42,rank:2},{country:"Falkland Islands",city:"Stanley",lat:-51.4,lon:-59.51,rank:2},{country:"Faroe Islands",city:"Torshavn",lat:62.05,lon:-6.56,rank:3},{country:"Fiji",city:"Suva",lat:-18.06,lon:178.3,rank:3},{country:"Finland",city:"Helsinki",lat:60.15,lon:25.03,rank:1},{country:"France",city:"Paris",lat:48.5,lon:2.2,rank:1},{country:"French Guiana",city:"Cayenne",lat:5.05,lon:-52.18,rank:3},{country:"French Polynesia",city:"Papeete",lat:-17.32,lon:-149.34,rank:3},{country:"Gabon",city:"Libreville",lat:.25,lon:9.26,rank:3},{country:"Gambia",city:"Banjul",lat:13.28,lon:-16.4,rank:3},{country:"Georgia",city:"T'bilisi",lat:41.43,lon:44.5,rank:2},{country:"Macao",city:"Macau",lat:22.12,lon:113.33,rank:3},{country:"Republic of Moldova",city:"Chisinau",lat:47.02,lon:28.5,rank:3},{country:"Germany",city:"Berlin",lat:52.3,lon:13.25,rank:1},{country:"Ghana",city:"Accra",lat:5.35,lon:-.06,rank:3},{country:"Greece",city:"Athens",lat:37.58,lon:23.46,rank:1},{country:"Greenland",city:"Nuuk",lat:64.1,lon:-51.35,rank:2},{country:"Guadeloupe",city:"Basse-Terre",lat:16,lon:-61.44,rank:3},{country:"Guatemala",city:"Guatemala",lat:14.4,lon:-90.22,rank:1},{country:"Guernsey",city:"St. Peter Port",lat:49.26,lon:-2.33,rank:2},{country:"Guinea",city:"Conakry",lat:9.29,lon:-13.49,rank:3},{country:"Guinea-Bissau",city:"Bissau",lat:11.45,lon:-15.45,rank:3},{country:"Guyana",city:"Georgetown",lat:6.5,lon:-58.12,rank:3},{country:"Haiti",city:"Port-au-Prince",lat:18.4,lon:-72.2,rank:1},{country:"Honduras",city:"Tegucigalpa",lat:14.05,lon:-87.14,rank:1},{country:"Hungary",city:"Budapest",lat:47.29,lon:19.05,rank:1},{country:"Iceland",city:"Reykjavik",lat:64.1,lon:-21.57,rank:1},{country:"India",city:"New Delhi",lat:28.37,lon:77.13,rank:1},{country:"Indonesia",city:"Jakarta",lat:-6.09,lon:106.49,rank:1},{country:"Iran",city:"Tehran",lat:35.44,lon:51.3,rank:1},{country:"Iraq",city:"Baghdad",lat:33.2,lon:44.3,rank:1},{country:"Ireland",city:"Dublin",lat:53.21,lon:-6.15,rank:1},{country:"Israel",city:"Jerusalem",lat:31.47,lon:35.12,rank:1},{country:"Italy",city:"Rome",lat:41.54,lon:12.29,rank:1},{country:"Japan",city:"Tokyo",lat:35.41,lon:139.41,rank:1},{country:"Jamaica",city:"Kingston",lat:18,lon:-76.5,rank:1},{country:"Jordan",city:"Amman",lat:31.57,lon:35.52,rank:2},{country:"Kazakhstan",city:"Astana",lat:51.1,lon:71.3,rank:2},{country:"Kenya",city:"Nairobi",lat:-1.17,lon:36.48,rank:1},{country:"Kiribati",city:"Tarawa",lat:1.3,lon:173,rank:2},{country:"Kuwait",city:"Kuwait",lat:29.3,lon:48,rank:2},{country:"Kyrgyzstan",city:"Bishkek",lat:42.54,lon:74.46,rank:3},{country:"Laos",city:"Vientiane",lat:17.58,lon:102.36,rank:1},{country:"Latvia",city:"Riga",lat:56.53,lon:24.08,rank:2},{country:"Lebanon",city:"Beirut",lat:33.53,lon:35.31,rank:1},{country:"Lesotho",city:"Maseru",lat:-29.18,lon:27.3,rank:3},{country:"Liberia",city:"Monrovia",lat:6.18,lon:-10.47,rank:2},{country:"Libya",city:"Tripoli",lat:32.54,lon:13.11,rank:2},{country:"Liechtenstein",city:"Vaduz",lat:47.08,lon:9.31,rank:2},{country:"Lithuania",city:"Vilnius",lat:54.38,lon:25.19,rank:2},{country:"Luxembourg",city:"Luxembourg",lat:49.37,lon:6.09,rank:1},{country:"Madagascar",city:"Antananarivo",lat:-18.55,lon:47.31,rank:2},{country:"Malawi",city:"Lilongwe",lat:-14,lon:33.48,rank:3},{country:"Malaysia",city:"Kuala Lumpur",lat:3.09,lon:101.41,rank:1},{country:"Maldives",city:"Male",lat:4,lon:73.28,rank:2},{country:"Mali",city:"Bamako",lat:12.34,lon:-7.55,rank:3},{country:"Malta",city:"Valletta",lat:35.54,lon:14.31,rank:2},{country:"Martinique",city:"Fort-de-France",lat:14.36,lon:-61.02,rank:3},{country:"Mauritania",city:"Nouakchott",lat:-20.1,lon:57.3,rank:3},{country:"Mayotte",city:"Mamoudzou",lat:-12.48,lon:45.14,rank:3},{country:"Mexico",city:"Mexico",lat:19.2,lon:-99.1,rank:1},{country:"Fed. States of Micronesia",city:"Palikir",lat:6.55,lon:158.09,rank:3},{country:"Mozambique",city:"Maputo",lat:-25.58,lon:32.32,rank:2},{country:"Myanmar",city:"Yangon",lat:16.45,lon:96.2,rank:3},{country:"Namibia",city:"Windhoek",lat:-22.35,lon:17.04,rank:2},{country:"Nepal",city:"Kathmandu",lat:27.45,lon:85.2,rank:1},{country:"Netherlands Antilles",city:"Willemstad",lat:12.05,lon:-69,rank:3},{country:"Netherlands",city:"Amsterdam",lat:52.23,lon:4.54,rank:1},{country:"New Caledonia",city:"Noumea",lat:-22.17,lon:166.3,rank:2},{country:"New Zealand",city:"Wellington",lat:-41.19,lon:174.46,rank:1},{country:"Nicaragua",city:"Managua",lat:12.06,lon:-86.2,rank:2},{country:"Niger",city:"Niamey",lat:13.27,lon:2.06,rank:2},{country:"Nigeria",city:"Abuja",lat:9.05,lon:7.32,rank:2},{country:"Norfolk Island",city:"Kingston",lat:-45.2,lon:168.43,rank:3},{country:"Northern Mariana Islands",city:"Saipan",lat:15.12,lon:145.45,rank:3},{country:"Norway",city:"Oslo",lat:59.55,lon:10.45,rank:1},{country:"Oman",city:"Masqat",lat:23.37,lon:58.36,rank:2},{country:"Pakistan",city:"Islamabad",lat:33.4,lon:73.1,rank:1},{country:"Palau",city:"Koror",lat:7.2,lon:134.28,rank:3},{country:"Panama",city:"Panama",lat:9,lon:-79.25,rank:1},{country:"Papua New Guinea",city:"Port Moresby",lat:-9.24,lon:147.08,rank:1},{country:"Paraguay",city:"Asuncion",lat:-25.1,lon:-57.3,rank:1},{country:"Peru",city:"Lima",lat:-12,lon:-77,rank:1},{country:"Philippines",city:"Manila",lat:14.4,lon:121.03,rank:1},{country:"Poland",city:"Warsaw",lat:52.13,lon:21,rank:1},{country:"Portugal",city:"Lisbon",lat:38.42,lon:-9.1,rank:1},{country:"Puerto Rico",city:"San Juan",lat:18.28,lon:-66.07,rank:2},{country:"Qatar",city:"Doha",lat:25.15,lon:51.35,rank:2},{country:"Rawanda",city:"Kigali",lat:-1.59,lon:30.04,rank:2},{country:"Republic of Korea",city:"Seoul",lat:37.31,lon:126.58,rank:1},{country:"Romania",city:"Bucuresti",lat:44.27,lon:26.1,rank:1},{country:"Russian Federation",city:"Moskva",lat:55.45,lon:37.35,rank:1},{country:"Saint Kitts and Nevis",city:"Basseterre",lat:17.17,lon:-62.43,rank:3},{country:"Saint Lucia",city:"Castries",lat:14.02,lon:-60.58,rank:3},{country:"Saint Pierre and Miquelon",city:"Saint-Pierre",lat:46.46,lon:-56.12,rank:3},{country:"Saint Vincent ...",city:"Kingstown",lat:13.1,lon:-61.1,rank:3},{country:"Samoa",city:"Apia",lat:-13.5,lon:-171.5,rank:3},{country:"San Marino",city:"San Marino",lat:43.55,lon:12.3,rank:2},{country:"Sao Tome and Principe",city:"Sao Tome",lat:.1,lon:6.39,rank:3},{country:"Saudi Arabia",city:"Riyadh",lat:24.41,lon:46.42,rank:1},{country:"Senegal",city:"Dakar",lat:14.34,lon:-17.29,rank:2},{country:"Sierra Leone",city:"Freetown",lat:8.3,lon:-13.17,rank:2},{country:"Slovakia",city:"Bratislava",lat:48.1,lon:17.07,rank:2},{country:"Slovenia",city:"Ljubljana",lat:46.04,lon:14.33,rank:2},{country:"Solomon Islands",city:"Honiara",lat:-9.27,lon:159.57,rank:3},{country:"Somalia",city:"Mogadishu",lat:2.02,lon:45.25,rank:2},{country:"South Africa",city:"Pretoria",lat:-25.44,lon:28.12,rank:1},{country:"Spain",city:"Madrid",lat:40.25,lon:-3.45,rank:1},{country:"Sudan",city:"Khartoum",lat:15.31,lon:32.35,rank:1},{country:"Suriname",city:"Paramaribo",lat:5.5,lon:-55.1,rank:2},{country:"Swaziland",city:"Mbabane",lat:-26.18,lon:31.06,rank:2},{country:"Sweden",city:"Stockholm",lat:59.2,lon:18.03,rank:1},{country:"Switzerland",city:"Bern",lat:46.57,lon:7.28,rank:1},{country:"Syrian Arab Republic",city:"Damascus",lat:33.3,lon:36.18,rank:2},{country:"Tajikistan",city:"Dushanbe",lat:38.33,lon:68.48,rank:2},{country:"Thailand",city:"Bangkok",lat:13.45,lon:100.35,rank:1},{country:"Republic of Macedonia",city:"Skopje",lat:42.01,lon:21.26,rank:2},{country:"Togo",city:"Lome",lat:6.09,lon:1.2,rank:3},{country:"Tonga",city:"Nuku'alofa",lat:-21.1,lon:-174,rank:3},{country:"Tunisia",city:"Tunis",lat:36.5,lon:10.11,rank:1},{country:"Turkey",city:"Ankara",lat:39.57,lon:32.54,rank:1},{country:"Turkmenistan",city:"Ashgabat",lat:38,lon:57.5,rank:2},{country:"Tuvalu",city:"Funafuti",lat:-8.31,lon:179.13,rank:3},{country:"Uganda",city:"Kampala",lat:.2,lon:32.3,rank:1},{country:"Ukraine",city:"Kiev",lat:50.3,lon:30.28,rank:1},{country:"United Arab Emirates",city:"Abu Dhabi",lat:24.28,lon:54.22,rank:1},{country:"United Kingdom",city:"London",lat:51.36,lon:-.05,rank:1},{country:"Tanzania",city:"Dodoma",lat:-6.08,lon:35.45,rank:2},{country:"USA",city:"Washington DC",lat:39.91,lon:-77.02,rank:1},{country:"Virgin Islands",city:"Charlotte Amalie",lat:18.21,lon:-64.56,rank:3},{country:"Uruguay",city:"Montevideo",lat:-34.5,lon:-56.11,rank:1},{country:"Uzbekistan",city:"Tashkent",lat:41.2,lon:69.1,rank:2},{country:"Vanuatu",city:"Port-Vila",lat:-17.45,lon:168.18,rank:3},{country:"Venezuela",city:"Caracas",lat:10.3,lon:-66.55,rank:1},{country:"Viet Nam",city:"Hanoi",lat:21.05,lon:105.55,rank:1},{country:"Yugoslavia",city:"Belgrade",lat:44.5,lon:20.37,rank:1},{country:"Zambia",city:"Lusaka",lat:-15.28,lon:28.16,rank:2},{country:"Zimbabwe",city:"Harare",lat:-17.43,lon:31.02,rank:1}],N=[];window.onload=function(){h(),M=document.createElement("canvas"),B=M.getContext("2d"),P=document.getElementById("mapView"),I=P.getContext("2d"),p=new Image,p.onload=function(){w=p.width,S=p.height,M.width=w,M.height=S,L=.02*S,A=.01*S,g()},p.src="world-map-b1.jpg"}}(FlyEast||(FlyEast={}));